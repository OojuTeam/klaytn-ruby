RSpec.shared_examples 'transaction_stubs', transaction_stubs: true do
  before do
    if ENV['KAS_ACCESS_KEY'].blank? || ENV['KAS_SECRET_ACCESS_KEY'].blank?
      puts "Add KAS credentials (export KAS_ACCESS_KEY=xxx, export KAS_SECRET_ACCESS_KEY=yyy) to test Klaytn::Transaction examples."
    elsif ENV['KAS_ACCOUNT_WALLET_ADDRESS'].blank?
      puts "Add a KAS account pool wallet address (export KAS_ACCOUNT_WALLET_ADDRESS=0x0xxx) to test 'Klaytn::Transaction.new().send' examples."
    end
  end

  let(:client) {
    Klaytn::Transaction.new(kas_access_key: ENV['KAS_ACCESS_KEY'], kas_secret_access_key: ENV['KAS_SECRET_ACCESS_KEY'], kas_account_wallet_address: ENV['KAS_ACCOUNT_WALLET_ADDRESS'], kas_account_pool_krn: ENV['KAS_ACCOUNT_POOL_KRN'])
  }

  let(:get_transaction_hash) { '0x00301b2b1c09ed43d4b59cbcd5610ebfe17a48215e6f6de10693eb368a489baa' }

  let(:get_transaction_response) {
    {"blockHash"=>"0x597fb462dfecc907a413b343573dce46299e3c85b6e1608f3d212305e0c12b38", "blockNumber"=>"0x50c8793", "contractAddress"=>"0x000c677c18498fb26474c726b95b1938d3133dd8", "from"=>"0x58e0cc862c13249cbfad5b47f10a0f456cda1470", "gas"=>"0x4756a", "gasPrice"=>"0xae9f7bcc00", "gasUsed"=>"0x4756a", "hash"=> get_transaction_hash, "input"=>"0x608060405234801561001057600080fd5b50610312806100206000396000f3fe608060405234801561001057600080fd5b506004361061002b5760003560e01c80637e9eb17a14610030575b600080fd5b61004a60048036038101906100459190610118565b61004c565b005b8060405161005a9190610192565b60405180910390203373ffffffffffffffffffffffffffffffffffffffff167f98ff33ae94023f76d49075113b0006e42bbd90da136de0fe299e0c172ddf212260405160405180910390a350565b60006100bb6100b6846101ce565b6101a9565b9050828152602081018484840111156100d7576100d66102bc565b5b6100e2848285610215565b509392505050565b600082601f8301126100ff576100fe6102b7565b5b813561010f8482602086016100a8565b91505092915050565b60006020828403121561012e5761012d6102c6565b5b600082013567ffffffffffffffff81111561014c5761014b6102c1565b5b610158848285016100ea565b91505092915050565b600061016c826101ff565b610176818561020a565b9350610186818560208601610224565b80840191505092915050565b600061019e8284610161565b915081905092915050565b60006101b36101c4565b90506101bf8282610257565b919050565b6000604051905090565b600067ffffffffffffffff8211156101e9576101e8610288565b5b6101f2826102cb565b9050602081019050919050565b600081519050919050565b600081905092915050565b82818337600083830152505050565b60005b83811015610242578082015181840152602081019050610227565b83811115610251576000848401525b50505050565b610260826102cb565b810181811067ffffffffffffffff8211171561027f5761027e610288565b5b80604052505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600080fd5b600080fd5b600080fd5b600080fd5b6000601f19601f830116905091905056fea26469706673582212205edb7b2ceedf2b11e0e642648f1cb62ff5441484f228072830d62e90ab58c87e64736f6c63430008070033", "logs"=>[], "logsBloom"=>"0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000", "nonce"=>"0xd3", "senderTxHash"=> get_transaction_hash, "signatures"=>[{"R"=>"0xd913f5d1cf54b2ae1813e6640b8d9091ff6b0f2d72f9cc146cb1a25f7a7395f1", "S"=>"0x477c9b737569be02562c3516f694f93eb2664d16e36509bcd1baf4e6cbe100cf", "V"=>"0x7f5"}], "status"=>"Committed", "to"=>nil, "transactionHash"=> get_transaction_hash, "transactionIndex"=>"0x1", "type"=>"TxTypeLegacyTransaction", "typeInt"=>0, "value"=>"0x0"}
  }

  let(:send_transaction_recipient) { '0x00E7b604e9493d53749e7b7b9e39F313d9F9890a' }

  let(:send_valid_transaction_response) {
    {"from"=>"0x6e1f42c1eb314a0f53ca6ae836be077aaeee6cc0", "gas"=>200000, "gasPrice"=>"0xae9f7bcc00", "input"=>"0x74657374", "nonce"=>7, "rlp"=>"0x10f8840785ae9f7bcc0083030d409400e7b604e9493d53749e7b7b9e39f313d9f9890a01946e1f42c1eb314a0f53ca6ae836be077aaeee6cc08474657374f847f8458207f6a097c895e5db65f3146c03f6b0e86f0ccee6e706994f38b3c679e17339ff2a3a9aa0290e29f281f1a4b0b5eb9cc702e1d1f1186c0886fc0c324f2f924763a88d3a96", "signatures"=>[{"R"=>"0x97c895e5db65f3146c03f6b0e86f0ccee6e706994f38b3c679e17339ff2a3a9a", "S"=>"0x290e29f281f1a4b0b5eb9cc702e1d1f1186c0886fc0c324f2f924763a88d3a96", "V"=>"0x7f6"}], "status"=>"Submitted", "to"=>"0x00e7b604e9493d53749e7b7b9e39f313d9f9890a", "transactionHash"=>"0xd81e6e3dced28efb826914d97cd7b269cea206893ace7fd31f482884e0c8cf12", "typeInt"=>16, "value"=>"0x1"}
  }
end
